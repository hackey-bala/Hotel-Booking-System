{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import API_BASE_URL from\"../config\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminBookings(){const[bookings,setBookings]=useState([]);const token=localStorage.getItem(\"adminToken\");const loadBookings=()=>{axios.get(\"\".concat(API_BASE_URL,\"/admin/bookings\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setBookings(res.data)).catch(err=>console.log(err));};useEffect(()=>{loadBookings();},[]);// APPROVE BOOKING\nconst approveBooking=id=>{axios.put(\"\".concat(API_BASE_URL,\"/admin/approve/\").concat(id),{},{headers:{Authorization:\"Bearer \".concat(token)}}).then(()=>{alert(\"Booking Approved & Room Locked\");loadBookings();});};// REJECT BOOKING\nconst rejectBooking=id=>{if(!window.confirm(\"Reject Booking?\"))return;axios.put(\"\".concat(API_BASE_URL,\"/admin/reject/\").concat(id),{},{headers:{Authorization:\"Bearer \".concat(token)}}).then(()=>{alert(\"Booking Rejected & Room Released\");loadBookings();});};// DELETE BOOKING\nconst deleteBooking=id=>{if(!window.confirm(\"Delete booking permanently?\"))return;axios.delete(\"\".concat(API_BASE_URL,\"/admin/bookings/\").concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(()=>{alert(\"Booking Deleted & Room Released\");loadBookings();}).catch(err=>console.log(err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin \\u2014 Manage Bookings\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dates\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map(b=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:b.customerName}),/*#__PURE__*/_jsx(\"td\",{children:b.roomName}),/*#__PURE__*/_jsxs(\"td\",{children:[b.checkIn,\" \\u2192 \",b.checkOut]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:b.status===\"Approved\"?\"badge bg-success\":b.status===\"Rejected\"?\"badge bg-danger\":\"badge bg-warning\",children:b.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:b.paymentStatus===\"Paid\"?\"badge bg-success\":b.paymentStatus===\"Rejected\"?\"badge bg-danger\":\"badge bg-secondary\",children:b.paymentStatus})}),/*#__PURE__*/_jsxs(\"td\",{children:[b.status===\"Pending\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm mx-1\",onClick:()=>approveBooking(b.id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm mx-1\",onClick:()=>rejectBooking(b.id),children:\"Reject\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark btn-sm\",onClick:()=>deleteBooking(b.id),children:\"Delete\"}),b.status!==\"Pending\"&&\" \"]})]},b.id))})]})]});}","map":{"version":3,"names":["axios","useEffect","useState","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminBookings","bookings","setBookings","token","localStorage","getItem","loadBookings","get","concat","headers","Authorization","then","res","data","catch","err","console","log","approveBooking","id","put","alert","rejectBooking","window","confirm","deleteBooking","delete","className","children","map","b","customerName","roomName","checkIn","checkOut","status","paymentStatus","onClick"],"sources":["C:/Users/Balaji S/OneDrive/Desktop/Hotel Management/hotel-frontend/src/pages/AdminBookings.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport API_BASE_URL from \"../config\";\r\nexport default function AdminBookings(){\r\n\r\n  const [bookings,setBookings] = useState([]);\r\n  const token = localStorage.getItem(\"adminToken\");\r\n\r\n\r\n  const loadBookings = ()=>{\r\n    axios.get(`${API_BASE_URL}/admin/bookings`,{\r\n      headers:{ Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(res => setBookings(res.data))\r\n    .catch(err => console.log(err));\r\n  };\r\n\r\n  useEffect(()=>{ loadBookings(); },[]);\r\n\r\n\r\n\r\n  // APPROVE BOOKING\r\n  const approveBooking = (id)=>{\r\n    axios.put(`${API_BASE_URL}/admin/approve/${id}`,{},{\r\n      headers:{ Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(()=>{\r\n      alert(\"Booking Approved & Room Locked\");\r\n      loadBookings();\r\n    });\r\n  };\r\n\r\n\r\n  // REJECT BOOKING\r\n  const rejectBooking = (id)=>{\r\n    if(!window.confirm(\"Reject Booking?\")) return;\r\n\r\n    axios.put(`${API_BASE_URL}/admin/reject/${id}`,{},{\r\n      headers:{ Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(()=>{\r\n      alert(\"Booking Rejected & Room Released\");\r\n      loadBookings();\r\n    });\r\n  };\r\n\r\n\r\n  // DELETE BOOKING\r\n  const deleteBooking = (id)=>{\r\n    if(!window.confirm(\"Delete booking permanently?\")) return;\r\n\r\n    axios.delete(`${API_BASE_URL}/admin/bookings/${id}`,{\r\n      headers:{ Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(()=>{\r\n      alert(\"Booking Deleted & Room Released\");\r\n      loadBookings();\r\n    })\r\n    .catch(err=>console.log(err));\r\n  };\r\n\r\n\r\n  return(\r\n    <div className=\"container mt-4\">\r\n\r\n      <h2>Admin — Manage Bookings</h2>\r\n      <hr/>\r\n\r\n      <table className=\"table table-bordered table-striped\">\r\n        <thead>\r\n          <tr>\r\n            <th>Customer</th>\r\n            <th>Room</th>\r\n            <th>Dates</th>\r\n            <th>Status</th>\r\n            <th>Payment</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {bookings.map(b=>(\r\n            <tr key={b.id}>\r\n              <td>{b.customerName}</td>\r\n              <td>{b.roomName}</td>\r\n\r\n              <td>\r\n                {b.checkIn} → {b.checkOut}\r\n              </td>\r\n\r\n              <td>\r\n                <span className={\r\n                  b.status === \"Approved\"\r\n                  ? \"badge bg-success\"\r\n                  : b.status === \"Rejected\"\r\n                  ? \"badge bg-danger\"\r\n                  : \"badge bg-warning\"\r\n                }>\r\n                  {b.status}\r\n                </span>\r\n              </td>\r\n\r\n              <td>\r\n                <span className={\r\n                  b.paymentStatus === \"Paid\"\r\n                  ? \"badge bg-success\"\r\n                  : b.paymentStatus === \"Rejected\"\r\n                  ? \"badge bg-danger\"\r\n                  : \"badge bg-secondary\"\r\n                }>\r\n                  {b.paymentStatus}\r\n                </span>\r\n              </td>\r\n\r\n              <td>\r\n\r\n                {/* Pending Bookings → Show Approve / Reject */}\r\n                {b.status === \"Pending\" && (\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-success btn-sm mx-1\"\r\n                      onClick={()=>approveBooking(b.id)}>\r\n                      Approve\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"btn btn-danger btn-sm mx-1\"\r\n                      onClick={()=>rejectBooking(b.id)}>\r\n                      Reject\r\n                    </button>\r\n                  </>\r\n                )}\r\n\r\n                {/* Delete Always Available */}\r\n                <button\r\n                  className=\"btn btn-dark btn-sm\"\r\n                  onClick={()=>deleteBooking(b.id)}>\r\n                  Delete\r\n                </button>\r\n\r\n                {b.status !== \"Pending\" && \" \"}\r\n              </td>\r\n\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
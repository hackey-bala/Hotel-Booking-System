{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import API_BASE_URL from\"../config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Bookings(){const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const userId=localStorage.getItem(\"userId\");axios.get(\"\".concat(API_BASE_URL,\"/user/bookings/\").concat(userId)).then(res=>{console.log(\"BOOKINGS RESPONSE:\",res.data);if(Array.isArray(res.data)){setBookings(res.data);}else{setBookings([]);// prevent crash\n}setLoading(false);}).catch(err=>{console.log(err);setBookings([]);setLoading(false);});},[]);function cancelBooking(id){axios.put(\"\".concat(API_BASE_URL,\"/cancel-booking/\").concat(id)).then(()=>{alert(\"Booking Cancelled\");window.location.reload();});}if(loading)return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center mt-5\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Bookings\"}),bookings.length===0?/*#__PURE__*/_jsx(\"h4\",{className:\"text-center text-danger mt-4\",children:\"No bookings found\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CheckIn\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CheckOut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map(b=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:b.roomName}),/*#__PURE__*/_jsx(\"td\",{children:new Date(b.checkIn).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(b.checkOut).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:b.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(b.paymentStatus===\"Paid\"?\"bg-success\":b.paymentStatus===\"Rejected\"?\"bg-danger\":\"bg-warning\"),children:b.paymentStatus||\"Pending\"})}),/*#__PURE__*/_jsx(\"td\",{children:b.status===\"Booked\"?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>cancelBooking(b.id),children:\"Cancel\"}):\"—\"})]},b.id))})]})]});}","map":{"version":3,"names":["axios","useEffect","useState","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Bookings","bookings","setBookings","loading","setLoading","userId","localStorage","getItem","get","concat","then","res","console","log","data","Array","isArray","catch","err","cancelBooking","id","put","alert","window","location","reload","className","children","length","map","b","roomName","Date","checkIn","toLocaleDateString","checkOut","status","paymentStatus","onClick"],"sources":["C:/Users/Balaji S/OneDrive/Desktop/Hotel Management/hotel-frontend/src/pages/Bookings.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport API_BASE_URL from \"../config\";\r\nexport default function Bookings() {\r\n\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading,setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem(\"userId\");\r\n\r\n    axios.get(`${API_BASE_URL}/user/bookings/${userId}`)\r\n      .then(res => {\r\n        console.log(\"BOOKINGS RESPONSE:\", res.data);\r\n\r\n        if (Array.isArray(res.data)) {\r\n          setBookings(res.data);\r\n        } else {\r\n          setBookings([]);   // prevent crash\r\n        }\r\n\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setBookings([]);\r\n        setLoading(false);\r\n      });\r\n\r\n  }, []);\r\n\r\n  function cancelBooking(id){\r\n    axios.put(`${API_BASE_URL}/cancel-booking/${id}`)\r\n    .then(()=>{\r\n      alert(\"Booking Cancelled\");\r\n      window.location.reload();\r\n    })\r\n  }\r\n\r\n  if (loading) return <h3 className=\"text-center mt-5\">Loading...</h3>;\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2>My Bookings</h2>\r\n\r\n      {bookings.length === 0 ? (\r\n        <h4 className=\"text-center text-danger mt-4\">\r\n          No bookings found\r\n        </h4>\r\n      ) : (\r\n\r\n      <table className=\"table table-bordered mt-3\">\r\n        <thead>\r\n          <tr>\r\n            <th>Room</th>\r\n            <th>CheckIn</th>\r\n            <th>CheckOut</th>\r\n            <th>Status</th>\r\n            <th>Payment</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {bookings.map(b => (\r\n            <tr key={b.id}>\r\n              <td>{b.roomName}</td>\r\n              <td>{new Date(b.checkIn).toLocaleDateString()}</td>\r\n              <td>{new Date(b.checkOut).toLocaleDateString()}</td>\r\n              <td>{b.status}</td>\r\n\r\n              <td>\r\n                <span className={`badge ${\r\n                  b.paymentStatus === \"Paid\"\r\n                    ? \"bg-success\"\r\n                    : b.paymentStatus === \"Rejected\"\r\n                    ? \"bg-danger\"\r\n                    : \"bg-warning\"\r\n                }`}>\r\n                  {b.paymentStatus || \"Pending\"}\r\n                </span>\r\n              </td>\r\n\r\n              <td>\r\n                {b.status === \"Booked\" ? (\r\n                  <button\r\n                    className=\"btn btn-danger btn-sm\"\r\n                    onClick={() => cancelBooking(b.id)}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                ) : \"—\"}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import AdminNavbar from\"../components/AdminNavbar\";import API_BASE_URL from\"../config\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminPayments(){const[payments,setPayments]=useState([]);const[popup,setPopup]=useState(null);const token=localStorage.getItem(\"adminToken\");const loadPayments=()=>{axios.get(\"\".concat(API_BASE_URL,\"/admin/payments\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setPayments(res.data));};useEffect(()=>{loadPayments();},[]);const approve=id=>{axios.put(\"\".concat(API_BASE_URL,\"/admin/payment/approve/\").concat(id),{},{headers:{Authorization:\"Bearer \".concat(token)}}).then(()=>{alert(\"Payment Approved\");loadPayments();});};const reject=id=>{axios.put(\"\".concat(API_BASE_URL,\"/admin/payment/reject/\").concat(id),{},{headers:{Authorization:\"Bearer \".concat(token)}}).then(()=>{alert(\"Payment Rejected\");loadPayments();});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AdminNavbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Verification\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Transaction\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Proof\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:payments.map(p=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.userName}),/*#__PURE__*/_jsx(\"td\",{children:p.roomName}),/*#__PURE__*/_jsx(\"td\",{children:p.transactionId}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>setPopup(p.paymentProof),children:\"View\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:p.paymentStatus===\"Paid\"?\"badge bg-success\":p.paymentStatus===\"Rejected\"?\"badge bg-danger\":\"badge bg-warning\",children:p.paymentStatus})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm mx-1\",onClick:()=>approve(p.id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>reject(p.id),children:\"Reject\"})]})]},p.id))})]}),popup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-bg\",style:{position:\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",background:\"#000000aa\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},onClick:()=>setPopup(null),children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_BASE_URL,\"/payments/\").concat(popup),style:{maxHeight:\"90%\",borderRadius:\"10px\"},alt:\"proof\"})})]})]});}","map":{"version":3,"names":["axios","useEffect","useState","AdminNavbar","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminPayments","payments","setPayments","popup","setPopup","token","localStorage","getItem","loadPayments","get","concat","headers","Authorization","then","res","data","approve","id","put","alert","reject","children","className","map","p","userName","roomName","transactionId","onClick","paymentProof","paymentStatus","style","position","top","left","width","height","background","display","justifyContent","alignItems","src","maxHeight","borderRadius","alt"],"sources":["C:/Users/Balaji S/OneDrive/Desktop/Hotel Management/hotel-frontend/src/pages/AdminPayments.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport AdminNavbar from \"../components/AdminNavbar\";\r\nimport API_BASE_URL from \"../config\";\r\nexport default function AdminPayments(){\r\n\r\n  const [payments,setPayments] = useState([]);\r\n  const [popup,setPopup] = useState(null);\r\n\r\n  const token = localStorage.getItem(\"adminToken\");\r\n\r\n  const loadPayments = ()=>{\r\n    axios.get(`${API_BASE_URL}/admin/payments`,{\r\n      headers:{ Authorization:`Bearer ${token}` }\r\n    })\r\n    .then(res=>setPayments(res.data));\r\n  };\r\n\r\n  useEffect(()=>{ loadPayments(); },[]);\r\n\r\n  const approve = (id)=>{\r\n    axios.put(`${API_BASE_URL}/admin/payment/approve/${id}`,{},{\r\n      headers:{ Authorization:`Bearer ${token}` }\r\n    })\r\n    .then(()=>{\r\n      alert(\"Payment Approved\");\r\n      loadPayments();\r\n    });\r\n  };\r\n\r\n  const reject = (id)=>{\r\n    axios.put(`${API_BASE_URL}/admin/payment/reject/${id}`,{},{\r\n      headers:{ Authorization:`Bearer ${token}` }\r\n    })\r\n    .then(()=>{\r\n      alert(\"Payment Rejected\");\r\n      loadPayments();\r\n    });\r\n  };\r\n\r\n  return(\r\n    <>\r\n      <AdminNavbar/>\r\n\r\n      <div className=\"container\">\r\n        <h2>Payment Verification</h2>\r\n        <hr/>\r\n\r\n        <table className=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>User</th>\r\n              <th>Room</th>\r\n              <th>Transaction</th>\r\n              <th>Proof</th>\r\n              <th>Status</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {payments.map(p=>(\r\n              <tr key={p.id}>\r\n                <td>{p.userName}</td>\r\n                <td>{p.roomName}</td>\r\n                <td>{p.transactionId}</td>\r\n\r\n                <td>\r\n                  <button className=\"btn btn-primary btn-sm\"\r\n                    onClick={()=>setPopup(p.paymentProof)}>\r\n                    View\r\n                  </button>\r\n                </td>\r\n\r\n                <td>\r\n                  <span className={\r\n                    p.paymentStatus === \"Paid\"\r\n                    ? \"badge bg-success\"\r\n                    : p.paymentStatus === \"Rejected\"\r\n                    ? \"badge bg-danger\"\r\n                    : \"badge bg-warning\"\r\n                  }>\r\n                    {p.paymentStatus}\r\n                  </span>\r\n                </td>\r\n\r\n                <td>\r\n                  <button className=\"btn btn-success btn-sm mx-1\"\r\n                    onClick={()=>approve(p.id)}>\r\n                    Approve\r\n                  </button>\r\n\r\n                  <button className=\"btn btn-danger btn-sm\"\r\n                    onClick={()=>reject(p.id)}>\r\n                    Reject\r\n                  </button>\r\n                </td>\r\n\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Popup */}\r\n        {popup && (\r\n          <div className=\"popup-bg\"\r\n            style={{\r\n              position:\"fixed\",\r\n              top:0,left:0,\r\n              width:\"100%\",height:\"100%\",\r\n              background:\"#000000aa\",\r\n              display:\"flex\",\r\n              justifyContent:\"center\",\r\n              alignItems:\"center\"\r\n            }}\r\n            onClick={()=>setPopup(null)}\r\n          >\r\n            <img\r\n              src={`${API_BASE_URL}/payments/${popup}`}\r\n              style={{maxHeight:\"90%\",borderRadius:\"10px\"}}\r\n              alt=\"proof\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}